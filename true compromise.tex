\RequirePackage[l2tabu, orthodox]{nag}
\documentclass[version=3.21, pagesize, notitlepage, twoside=off, bibliography=totoc, DIV=calc, fontsize=12pt, a4paper]{scrartcl}
\input{preamble/packages}
\input{preamble/redac}
\input{preamble/math_basics}
\input{preamble/math_mine}
%\input{preamble/draw}
%\input{preamble/acronyms}
%\input{preamble/refAPIcmds}

%I find these settings useful in draft mode. Should be removed for final versions.
	%Which line breaks are chosen: accept worse lines, therefore reducing risk of overfull lines. Default = 200.
		\tolerance=2000
	%Accept overfull hbox up to...
		\hfuzz=2cm
	%Reduces verbosity about the bad line breaks.
		\hbadness 5000
	%Reduces verbosity about the underful vboxes.
		\vbadness=1300

%\title{Title \thanks{Thanks.}}
%\author{Name1}
%\author{Name2}
%\affil{Université Paris-Dauphine, PSL Research University, CNRS, LAMSADE, 75016 PARIS, FRANCE\\
%	\href{mailto:olivier.cailloux@dauphine.fr}{olivier.cailloux@dauphine.fr}
%}
%\author{Name3}
%\affil{Affil2}
%\hypersetup{
%	pdfsubject={},
%	pdfkeywords={},
%}

\setcounter{MaxMatrixCols}{10}
%TCIDATA{OutputFilter=LATEX.DLL}
%TCIDATA{Version=5.50.0.2953}
%TCIDATA{<META NAME="SaveForMode" CONTENT="1">}
%TCIDATA{BibliographyScheme=Manual}
%TCIDATA{Created=Tuesday, August 09, 2005 15:34:58}
%TCIDATA{LastRevised=Thursday, March 07, 2019 13:36:58}
%TCIDATA{<META NAME="GraphicsSave" CONTENT="32">}
%TCIDATA{<META NAME="DocumentShell" CONTENT="Scientific Notebook\Blank with Theorem Tags">}
%TCIDATA{Language=American English}
%TCIDATA{CSTFile=Math.cst}
%TCIDATA{PageSetup=14,14,57,57,0}
%TCIDATA{AllPages=
%H=36
%F=36,\PARA{038<p type="texpara" tag="Body Text" >\hfill \thepage}
%}

%\newtheorem{theorem}{Theorem}[section]
\newtheorem{acknowledgement}[theorem]{Acknowledgement}
\newtheorem{algorithm}[theorem]{Algorithm}
\newtheorem{axiom}{Axiom}[section]
\newtheorem{case}{Case}[section]
\newtheorem{claim}{Claim}[section]
\newtheorem{conclusion}{Conclusion}[section]
\newtheorem{condition}{Condition}[section]
\newtheorem{conjecture}{Conjecture}[section]
%\newtheorem{corollary}{Corallary}[section]
\newtheorem{criterion}{Criterion}[section]
%\newtheorem{definition}{Definition}[section]
%\newtheorem{example}{Example}[section]
\newtheorem{exercise}{Exercise}[section]
%\newtheorem{lemma}{Lemma}[section]
\newtheorem{notation}{Notation}[section]
\newtheorem{problem}{Problem}[section]
%\newtheorem{proposition}{Proposition}[section]
%\newtheorem{remark}{Remark}[section]
\newtheorem{solution}{Solution}[section]
\newtheorem{summary}{Summary}[section]
%\newenvironment{proof}[1][Proof]{\noindent\textbf{#1.} }{\ \rule{0.5em}{0.5em}}

\title{Ex-Ante versus Ex-Post \\ Compromise}
\author{}
\date{}

\newcommand{\commentBN}[1]{\textcolor{magenta}{\small$\big[$BN: #1$\big]$}}
\newcommand{\commentRS}[1]{\textcolor{red}{\small$\big[$RS: #1$\big]$}}
\newcommand{\paretopt}{\mathit{PO}}

\begin{document}

\maketitle
\thispagestyle{empty}

\begin{abstract}
	A classical social choice setting is composed of a group of individuals, or voters, that express their preferences over a set of alternatives. The social choice problem consists in defining a procedure able to determine a collective choice for this group of voters, starting from their individual preferences. Such procedure is called social choice rule and it can be defined as a function mapping preference profiles to alternatives. Depending on the properties that this function satisfies, very different outcomes can be produced starting from the same initial profile. The plurality rule is one of the most common social choice rule and it consists in selecting, as a winner, the alternative that is considered the best by the largest number of voters forming the society. Yet, this rule can pick, as a winner, an alternative that is considered the worst by a strict majority of voters. Such outcome may be undesirable. Several procedures, the so-called compromise rules, have been proposed in the literature that aim to find a compromise. Nevertheless, all those rules can be defined as \textit{ex-ante compromises} or \textit{procedural compromises}, i.e., they impose over individuals a willingness to compromise but they do not ensure an outcome where everyone has effectively compromised. In this work, we approach the problem of compromise from an \textit{ex-post} perspective, favoring an outcome where every voter gives up her most preferred positions if this increases equality. We propose a new notion of compromise in the social choice context, considering both cardinal and ordinal utilities. 
\end{abstract}

\pagebreak

\section{Related Works}
	
	
	Imagine a setting where we want to 
	
	has to be selected among many candidates, the committee, who has to specify how to aggregate the preferences of the voters, faces the problem to arbitrate between the quality and the quantity of support behind an alternative.
	
	
	In a social choice situation where a common agreement has to be selected among many candidates, the committee, who has to specify how to aggregate the preferences of the voters, faces the problem to arbitrate between the quality and the quantity of support behind an alternative. This decision it is not obvious, and it leads to various outcomes satisfying different properties. Preferring the first to the latter may results into a lack of a majority support or, worst, into a strict majority of agents which strongly dislikes the chosen candidate. Vice versa, favoring the number of voters behind an alternative implies descending levels in individual preferences. 

In a classical social choice situation where an alternative has to be chosen among many candidates, the committee, who has to specify how to aggregate the preferences of the voters, often has to decide whether prefer the quality or the quantity of support. Choosing the plurality rule, ad example, the alternatives which are ranked the best by the largest number of voters are picked as outcome. The problem of this procedure is that, as long as there are more than two alternatives, the outcome may lack the support of any majority. In fact it may also be opposed by a strict majority of agents each of whom ranks the chosen candidate as their least preferred choice. 

In contrast to the plurality rule, the Majoritarian Compromise \cite{Sertel1999} unambiguously selects candidates who have the support of a majority in the best degree possible.

So the trade-off between the quality and quantity of support behind alternatives is always questionable in social choice settings.

In the case where the candidates are only two we talk about bargaining. The bargaining problem was first axiomatized by \cite{Nash1950}, who also proposed a solution for the problem that is obtained by maximizing the product of the differences between the utility from an agreement and the one from a disagreement (namely the status quo). This is the only bargaining solution that satisfies all the following axioms: independence of equivalent utility transformations, independence of irrelevant alternatives, pareto optimality and symmetry.

On compromise rules \cite{Merlin2019}. Bargaining survey \cite{Thomson1994}.
	
\section{Posing the problem}
Consider a finite set $N$ of individuals with $\#N=n\geq 2$ and a finite set $A$ of alternatives with $\#A=m\geq 2$. We write $L(A)$ for the set of linear orders over $A$ and $P_{i}\in L(A)$ stands for the preference of $i\in N$. For each $k\in \left\{ 1,...,\text{ }m\right\} $, $r_{k}(P_{i})$ is the alternative ranked at level $k$ by $P_{i}$. An (ordinal) social choice rule (SCR) is a mapping $f:L(A)^{N}\rightarrow 2^{A} \setminus \{\emptyset \}$.

We call BK-compromises the class of $q$-approval fallback bargaining rules introduced by Brams and Kilgour (2001) \cite{Brams2001}: the $q$-approval fallback bargaining rule picks ranks 1, 2, …, and stops as soon as at least $q$ voters rank some alternative at the chosen rank or better. All such alternatives form the compromise set, and among them the ones which receive the highest support are elected.
We start by two examples based on an observation made by Laslier at Buyukada. 
\begin{example}
	Consider the following preference profile $P\in L(A)^{N}$ with $n=100$:
	\begin{center}
		$
		\begin{array}{cccc}
		\mathbf{51} \quad &a&b&c\\
		\mathbf{49} \quad &c&b&a\\
		\end{array}
		$
	\end{center}
	which represents 51 individuals who prefer $a$ to $b$, $b$ to $c$, hence $a$ to $c$; and 49 individuals who prefer $c$ to $b$, $b$ to $a$, hence $c$ to $a $. At $P,$ when $q\in \left\{ 1,..., \lfloor \frac{n}{2}\rfloor +1\right\} $, all BK-compromises pick $a$, which does not appear as a compromise, as, after all, 51 voters reach their best alternative while the remaining 49 voters have to be contented with their worst one. Note that for $q\in \left\{ 1,..., \lfloor \frac{n}{2}\rfloor -1 \right\} $ the set of possible common agreements determined by the fallback bargaining procedure is $\{a,c\}$. Nevertheless, $a$ receives the highest support thus it is elected.
\end{example}

This point can be extended to values of $q$ that exceed a majority as we can see in the next example.

\begin{example}
	Let's consider again $n=100$ but now with 4 alternatives, take any $q\in \left\{ \lfloor \frac{n}{2}\rfloor +2,..., n-1\right\} $ and construct the preference profile:
	\begin{center}
		$
		\begin{array}{ccccc}
		\mathbf{26} \quad &a&b&c&d\\
		\mathbf{25} \quad &c&b&a&d\\
		\mathbf{k-51} \quad &d&b&a&c\\
		\mathbf{100-k} \quad &d&a&c&b\\
		\end{array}
		$
	\end{center}
\end{example}

where the corresponding BK-compromise picks $b$ \commentBN{Only for $q > 63$. Explain this and think how to change the example in order to show that there is a set of people whose will is always not taken into account.}. Here, the first three block of voters compromise among each other but the SCR doesn't seem to care about the fourth block of $100-q$ voters. Let's consider $q=\lfloor \frac{n}{2}\rfloor +2=52$ as an example, in the first level there are 26 voters preferring the alternative a, 25 preferring c and 49 preferring d. No alternative reaches the quota required so we descend one level. Now, considering both first and second top choices, $74$ voters agree on the alternative $a$ as a bargaining outcome, $52$ voters on $b$, $25$ on $c$ and $49$ on $d$. Only $a$ and $b$ reach the quota, so the compromise set is $\{a,b\}$ but the alternative who receive the highest support is $a$ therefore is the one picked as compromise.

These two examples illustrate that BK-compromises (except fallback bargaining (FB) where $q=n$ which will be further discussed in Example \ref{ex:qeqn}) are “ex-ante compromises” or “procedural compromises”, i.e., they impose over individuals a willingness to compromise but they don't ensure an outcome where everyone has effectively compromised. So what is a “true compromise”? To define it, we switch to an utilitarian world.

\section{Cardinal compromises}
Let $U(A) \subseteq \R^A$ be the set of injective real-valued “utility” functions defined over $A$, thus mandating, $\forall u_{i}\in U(A)$: $u_{i}(x)\neq u_{i}(y)$ $\forall x ≠ y\in A$. Note that each $u_{i}\in U$ induces a unique $P(u_{i})\in L(A)$.
For each $k\in \left\{ 1, ..., m\right\} $, we write $r_{k}(u_{i})$ for $r_{k}(P(u_{i}))$.

A (cardinal) SCR is a mapping $f:U(A)^{N}\rightarrow 2^{A} \setminus \{\emptyset \}$. We will not specify whether a SCR is cardinal or ordinal whenever this is clear from its domain.

We adopt the “equal loss principle” which Chun (1988, Economics Letters) \cite{Chun1988}, Chun and Peters (1991, MASS) \cite{Chun1991} introduce and characterize for bargaining problems. It seems that the concept is also used in bankruptcy and matching problems. For each $u\in U(A)^{N}$, each $x\in A$ and each $i\in N$, let $\lambda_{i}^u(x) = \max_{a \in A} u_i(a) - u_{i}(x)$ represent the loss of utility of $i$ when electing $x$, and $\lambda ^{u}(x)=(\lambda _{i}^{u}(x))_{i\in N}$.

Unlike bargaining, our problem does not induce a convex space of achievable utilities. As a result, we cannot ensure the existence of $x\in A$ with $\lambda _{i}^{u}(x)=\lambda _{j}^{u}(x)$ for all $i,j\in N$. Hence, we aim to determine the “most equally distributed” vector within $\left\{ \lambda ^{u}(x)\right\} _{x\in A}$. We thus need to adopt a spread measure which is a mapping $\sigma : \R_{+}^{N}\longrightarrow \R_{+}$. We write $\Sigma $ for the class of spread measures that satisfy the following pairwise Pareto dominance condition: for all $r$, $s\in \R_{+}^{N}$, $\left[\left\vert r_{i}-r_{j}\right\vert \leq \left\vert s_{i}-s_{j}\right\vert \forall i, j\in N\right] ⇒ \sigma (r)\leq \sigma (s)$. Any $\sigma \in \Sigma$ reaches a minimum value for an input whose components are all equal.

\textbf{TO DO: }

$\cdot$ Give reference to the relevant literature, also to the Pareto dominance condition.

$\cdot$ Give examples of spread measure that do and do not satisfy the condition.

$\cdot$ BEA: give some examples using average or standard deviation.\\


Given any $\sigma \in \Sigma $, we define a (cardinal) compromise as the SCR $C^{\sigma }:U(A)^{N}\rightarrow 2^{A} \setminus \{\emptyset \}$ such that $C^{\sigma }(u) = \argmin_{x \in A} (\sigma \circ \lambda^u)(x) = \left\{ x\in A:\sigma (\lambda ^{u}(x))\leq \sigma (\lambda ^{u}(y)), \forall y\in A\right\} $. Let $\paretopt(u)$ be the set of alternatives which are Pareto optimal at $u\in U(A)^{N}$. As a matter of fact, $C^{\sigma }(u)$ can pick alternatives outside $\paretopt(u)$. In fact, $C^{\sigma }(u)$ $\cap $ $\paretopt(u)$ can even be empty. To see this, with two voters and five alternatives, consider $u$ with $u_{1}(a)=5$, $u_{1}(b)=4$, $u_{1}(c)=3$, $u_{1}(d)=2$, $u_{1}(e)=1$, $u_{2}(d)=5$, $u_{2}(c)=4$, $u_{2}(b)=3$, $u_{2}(a)=2$, $u_{2}(e)=1$. Note that for any $\sigma \in \Sigma $, $C^{\sigma }(u)=\left\{ e\right\} $ while $\paretopt(u)=\left\{ a, b, c, d\right\} $. 

\begin{remark}
	Given the spirit of fairness that underlies $C^{\sigma }$, picking $e$ at $u$ may have a merit. To see why, consider the following situation, where a social planner must choose between a world $x$ where individuals may sell their organs, and a world $y$ where they may not (assuming that they do not if they may not). Assume that the utility of individual $1$ would be slightly higher in world $x$, because she would sell an organ to individual $2$, who would gain a lot from this sell: $u_1(x) = 1, u_1(y) = 0, u_2(x) = 100, u_2(y) = 0$. Even though $y$ is Pareto dominated in this example, the social planner might prefer $y$ to $x$ by considering that in $x$, an individual benefits in an unfair way of the sale. (A more thorough argument could observe that in real life, the set of alternatives is not necessarily determined once and for all, and that by adopting a strategy that tolerates huge inequalities, the social planner creates an incentive for $u_2$ to avoid helping adding new alternatives in the agenda, such as one where $u_1$ does not desire to sell an organ to $u_2$.) \commentOC{TODO refer to literature.} This example illustrates the tension between Pareto efficiency, which may come with a price of huge inequalities as in this example, and pure equalitarian view, which as the previous example illustrates may completely disregard Pareto efficiency even when the cost in supplemental inequality is low. Exploring rules that trade-off between these two objectives might be interesting, but is left as a future goal.
\end{remark}
From now on, we will ensure the Pareto optimality of cardinal compromises by defining them as 
\[C^{\sigma }(u) = \argmin_{x \in \paretopt(u)} (\sigma \circ \lambda^u)(x) = \left\{ x\in \paretopt(u):\sigma (\lambda ^{u}(x))\leq \sigma (\lambda ^{u}(y)),  \forall y\in A\right\}.\]

OPEN QUESTION: Which axioms would characterize $C^{\sigma }$?

\section{Ordinal compromises} 
We now address the question of relating $C^{\sigma }$ to ordinal SCRs.

A utility assignment (UA) is a strictly decreasing function $v:\left\{ 1,..., m\right\} \rightarrow \R$ which maps ranks to utilities. For each $P_{i}\in L(A)$, $v$ induces a utility function $v_{P_{i}}$ $\in U(A)$ with $v_{P_{i}}(x)=v(k)$ for each $x=r_{k}(P_{i})\in A$. So for every $P\in L(A)^{N}$, $v_{P}=(v_{P_{1}},...,v_{P_{n}})$ $\in U(A)^{N}$ is the utility profile that $v$ induces from the preference profile $P$.

Given any UA $v$, an ordinal compromise is the SCR $C^{\sigma }\circ v:L(A)^{N}\rightarrow 2^{A} \setminus \{\emptyset \}$ such that $(C^{\sigma }\circ v)(P)=C^{\sigma }(v_{P})$ for every $P\in L(A)^{N}$. (We slightly abuse notation here by pretending that we can apply $v$ as a function to elements of $L(A)$.)

It is equivalent to define $C^\sigma_v$ as the following ordinal SCR, where $v$ is now considered a parameter of the SCR. Given $P$, define $\lambda^P(x) \in \intvl{1..m}^N$ as the mapping that associates to each voter $i$ the number $l_i$ of alternatives preferred to $x$ in $P_i$ (thus the loss, measured in ranks, endured by $i$ because of the choice of $x$ instead of her top choice), where $\intvl{1..m} = \{1, …, m\}$. Define $v^\text{loss}$ as mapping the number of ranks lost to a loss of utility, thus $v^\text{loss}(l) = v(1)-v(1+l)$. Define $\sigma^\text{ord}: \intvl{1..m}^N → \R_+$ such that $\sigma^\text{ord}((l_i)_{i \in N}) = \sigma((v^\text{loss}(l_i))_{i \in N})$. Finally, define $C^\sigma_v(P) = \argmin_{x \in A} \sigma^\text{ord}(\lambda^P(x))$. \commentOC{We should think about the advantage of each presentation, or whether we keep both.}

\begin{proposition} 
\label{equivalence} 
Given any $\sigma \in \Sigma $ and any two UAs $v$ and $v^{\prime }$, there exists a $\sigma ^{\prime }\in \Sigma $ such that $C^{\sigma }\circ v=C^{\sigma ^{\prime }}\circ v^{\prime }$. 
\end{proposition}
\begin{proof}
Define $v^\text{loss}$, $v^{\prime\text{loss}}$ and $\sigma^\text{ord} = \sigma \circ v^\text{loss}$ as described above. We need to show the existence of $\sigma'$ such that $\sigma^\text{ord} = \sigma' \circ v^{\prime\text{loss}}$. Thus $\sigma' = \sigma \circ v^\text{loss} \circ v^{{\prime\text{loss}}^{-1}}$. This is necessarily in $\Sigma$ iff $\Sigma$ is closed under strict monotonous transformations of the input: $\forall \sigma \in \Sigma, t: \R → \R, t \text{ strictly monotonous}: \sigma \circ t \in \Sigma$. \commentOC{TODO check this and think about apparent counter-example that we wrote on Remzi’s board.}

Old proof follows.
Take any $\sigma \in \Sigma $ and any two UAs $v$ and $v^{\prime }$. Take any $(l_{1},...,l_{n})\in \R_{+}^{n}$ such that for each $i\in \left\{ 1,..., n\right\} $, we have $l_{i}=v^{\prime }(1)-v^{\prime }(r(l_{i}))$ for some $r(l_{i})\in \left\{ 1,..., m\right\} $. We set $\sigma ^{\prime }(l_{1},...,l_{n})=$ $\sigma (v(1)-v(r(l_{1})),...,$ $v(1)-v(r(l_{n}))).$ 
Now, take any $P\in L(A)^{N}$. I think, with this setting of $\sigma ^{\prime }$, we can show $C^{\sigma }\circ v(P)=C^{\sigma ^{\prime }}\circ v^{\prime }(P).$ Of course we also need to show $\sigma ^{\prime }\in \Sigma $.
\end{proof}

TO DO: consider the profile $(x, a_1, a_2, a_3, y, b_1, b_2, b_3), (b_1, b_2, y, x, b_3, a_1, a_2, a_3)$. For $v = $ Borda, there is no $\sigma$ satisfying pairwise Pareto. But for $v = (1000, 999, 998, 997, 0, …)$, there is a $\sigma$ satisfying pairwise Pareto. This might be because in that case $\Sigma$ is not closed under monotonous transformations, as required in the proof. To be checked.

\begin{definition}
\label{D1} \bigskip We say that an SCR $f:L(A)^{N}\rightarrow 2^{A} \setminus \{\emptyset \}$ is an ordinal compromise iff there exists $\sigma \in \Sigma $ and an UA $v$ such that $C^{\sigma }\circ v=f$.
\end{definition}

Note that by Proposition \ref{equivalence}, Definition \ref{D1} is equivalent to the apparently following stronger version:

\begin{definition}
\label{D2} We say that an SCR $f:L(A)^{N}\rightarrow 2^{A} \setminus \{\emptyset \}$ is an ordinal compromise iff for every UA $v$ there exists $\sigma \in \Sigma $ such that $C^{\sigma }\circ v=f$.
\end{definition}

\begin{example}
	\label{ex:qeqn}
Many ordinal SCRs fail to be ordinal compromises. To see this, consider the following preference profile

\begin{center}
	$
	\begin{array}{cccc}
	\mathbf{n-1} \quad &a&b&c\\
	\mathbf{1} \quad &c&b&a\\
	\end{array}
	$
\end{center}

where $C^{\sigma }\circ v$ picks $b$ for any UA $v$ and any $\sigma \in \Sigma $ while all BK-compromises (except when $q=n$) pick $a$. Moreover, for any scoring rule (except anti plurality), there is a choice of $n$ where the scoring rule picks $a$. Finally, all Condorcet consistent rules pick $a$ as well.
\end{example}

Regarding FB, consider the following preference profile with $n=2$ and $m=2k+2$

\bigskip

$x$ $a_{1}...a_{k}$ $y$ $b_{1}....b_{k}$

$b_{1}....b_{k-1}$ $y$ $x$ $b_{k}$ $a_{1}...a_{k}$

\bigskip

where under any $\sigma \in \Sigma $, $C^{\sigma }\circ v$ picks $y$ for the UA $v(k)=n-k+1$ while FB picks $x$. So FB fails Definition \ref{D2}, hence Definition \ref{D1}.

Note that this example can be generalized to any $n$ by replicating the first voter as much as one wishes. This illustrates in a clear and simple
way that $C^{\sigma }$ is ready to pay arbitrary amounts of utility (computed as a total loss of utility over all voters) to satisfy someone's envy.

To see that anti plurality also fails Definition 2, consider the following preference profile with $n=12$ and $m=5$

$3$ $.....d$ $a$

$3$ $.....d$ $b$

$3$ $.....d$ $c$

$2$ $......$ $d$

$1$ $.....d$ $e$

\bigskip

where under any $\sigma \in \Sigma $, $C^{\sigma }\circ v$ picks $d$ for the UA $v(k)=n-k+1$ while anti plurality picks $e$.

We thus observe that all BK-compromises, all scoring rules and all Condorcet consistent rules fail to be ordinal compromises.

TO DO: See whether the analysis above prevails when the UA $v$ is allowed to vary among individuals.

The two person example that shows that FB is not an ordinal compromise of special interest because $C^{\sigma }$ seems to particularly appealing in two person discrete bargaining environments. In that example, $y$ seems to be a more natural bargaining solution than $x$. So we can try to present $C^{\sigma }$ as a discrete bargaining solution. In this literature there is FB of Brams and Kilgour which is later rectified by Kibris and Sertel \cite{Sertel1999} by adding the disagreement outcome that was originally missing. It will be certainly interesting to introduce and analyze $C^{\sigma }$ in this ordinal context where ranks are utilities. Clearly, minimized envy will be a key condition which will differentiate $C^{\sigma }$ from FB.

Another direction of research to which Ali had pointed: As a spirit of compromise, we pick the alternative whose lambda is “most equally distributed”. But once we have lambdas, it makes sense to ask what else we can do with these. Ali suggested to minimize the median value of lambda. Sounds plausible but what does this mean? What else can we do with our lambdas? I feel that there are plenty of interesting questions here.

\bibliography{biblio}
\bibliographystyle{abbrv}

\appendix
\section{Transf}
Given sets $A, B, C, G \subseteq C^B$, given $\emptyset ≠ V \subseteq B^A$ a subset of the injective functions from $A$ to $B$. Define $F_1 \subseteq C^A$ as the set of functions $f$ such that $\exists v \in V, g \in G \suchthat f = g \circ v$. Define $F_2 \subseteq C^A$ as the set of functions $f$ such that $\forall v \in V, \exists g \in G \suchthat f = g \circ v$. It follows that $F_2 \subseteq F_1$. We are interested in defining a condition on $G$ which permit to obtain $F_1 \subseteq F_2$. 

We say that \emph{$G$ can compensate for $V$-transformations} iff $\forall v, v' \in V, g \in G, \exists g' \in G \suchthat g' \circ v' = g \circ v$.%; equivalently, such that $g^{v'} = g \circ v \circ v'^{-1}$ on the restricted domain $v'(A) \subseteq B$.

\begin{lemma}
	Given $A, B, C, G \subseteq C^B, \emptyset ≠ V \subseteq B^A$ as constrained above, and $F_1, F_2$ defined as above, if $G$ can compensate for $V$-transformations, then $F_1 \subseteq F_2$.
\end{lemma}
\begin{proof}
	Given $f \in F_1$, take $v, g$ such that $f = g \circ v$. Given any $v' \in V$, we want to find $g'$ such that $f = g' \circ v$. Such a function exists thanks to the hypothesized condition.
\end{proof}

\begin{lemma}
	Given $A, B, C, G \subseteq C^B, \emptyset ≠ V \subseteq B^A$ as constrained above, and $F_1, F_2$ defined as above, if $F_1 \subseteq F_2$, then $G$ can compensate for $V$-transformations.
\end{lemma}
\begin{proof}
	We know that $\forall v, g: [\forall v', \exists g' \suchthat g' \circ v' = g \circ v]$. We have to show that $\forall v, v', g: \exists g' \suchthat g' \circ v' = g \circ v$, which is the same thing.
\end{proof}
\end{document}
